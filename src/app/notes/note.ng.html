<div
  class="note"
  [class.is-dragging]="isDragging"
  [class.is-editing]="isEditing"
  [class.is-selected]="note.isSelected"
  [style.left.px]="note.x"
  [style.top.px]="note.y"
  (contextmenu)="preventContextMenu()"
  (mousedown)="mouseDown($event)"
  (mouseup)="mouseUp($event)">

  <div
    class="note-content"
    [style.width]="textareaWidth"
    [style.height]="textareaHeight"
    *ngIf="!isEditing">{{ note.content }}</div>

  <span
    class="edit-button"
    (click)="startEditing(); $event.stopPropagation()">
    edit
  </span>

  <textarea
    #textarea
    class="note-input"
    [(ngModel)]="note.content"
    [class.is-hidden]="!isEditing"
    [trigger-focus]="isEditing"
    (focus)="startEditing()"
    (blur)="stopEditing()"
    (mousedown)="$event.stopPropagation()"
    (mouseup)="resizeTextarea(textarea); $event.stopPropagation()"
    (click)="$event.stopPropagation()"
    (keyup.control.enter)="stopEditing()">
  </textarea>
</div>
